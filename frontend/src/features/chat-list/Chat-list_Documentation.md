# Модуль списка чатов `chat-list`

## Назначение
Модуль `chat-list` отвечает за отображение и управление списком чатов пользователя. Включает функционал создания, архивирования, удаления чатов и их отображение в интерфейсе. Модуль интегрируется с API через React Query и использует Zustand для управления состоянием.

## Структура
```
chat-list/
├── api/
│   └── chat.ts           # API-клиент для работы с чатами
├── model/
│   └── chat.ts          # Типы и интерфейсы
└── ui/
    ├── chat-list.tsx    # Основной компонент списка чатов
    ├── chat-list-item.tsx # Компонент элемента списка
    ├── chat-card.tsx    # Карточка чата
    ├── chat-group.tsx   # Группировка чатов
    ├── chat-actions-popover.tsx # Поповер с действиями
    └── create-chat-button.tsx # Кнопка создания чата
```

## Основные компоненты

### ChatList (chat-list.tsx)
- **Назначение:** Основной компонент списка чатов
- **Функциональность:**
  - Отображение активных и архивных чатов
  - Управление состоянием загрузки
  - Обработка ошибок
  - Навигация к выбранному чату
- **Особенности:**
  - Использует Zustand для управления состоянием
  - Интегрируется с Next.js роутингом
  - Поддерживает архивированные чаты

### Chat API (chat.ts)
- **Назначение:** API-клиент для работы с чатами
- **Функциональность:**
  - CRUD операции с чатами
  - Архивация/разархивация
  - Управление заголовками
- **Особенности:**
  - Использует React Query для кэширования
  - Интегрирует i18n для сообщений
  - Обработка ошибок с тостами

## Особенности
- **Состояние:** Управление через Zustand store
- **Кэширование:** React Query для оптимизации запросов
- **UI:** Адаптивный дизайн с поддержкой тем
- **Локализация:** Поддержка i18n для всех сообщений
- **Обработка ошибок:** Единообразная обработка через тосты

## Best practices
- Используйте React Query для всех API-запросов
- Все действия с чатами должны обновлять кэш
- Компоненты должны быть максимально переиспользуемыми
- Обработка ошибок должна быть информативной
- Используйте типизацию для всех данных

## Пример использования
```tsx
// Создание нового чата
const { mutate: createChat } = useChatApi.useCreateChat();
createChat('New Chat Title');

// Получение списка чатов
const { data: chats, isLoading } = useChatApi.useGetChats();

// Архивация чата
const { mutate: archiveChat } = useChatApi.useArchiveChat();
archiveChat(chatId);
```

## Новое (июнь 2024)
- Добавлена поддержка архивированных чатов
- Улучшена обработка ошибок с детальными сообщениями
- Оптимизирована производительность через React Query
- Добавлена анимация загрузки
- Улучшен UX при работе с большими списками чатов

---
_Документация актуальна для структуры на июнь 2024._ 